<!doctype html>
<html lang="sk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>BOL Scanner Pro – iOS Fix</title>
  <link rel="stylesheet" href="./assets/styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/html5-qrcode@2.3.10/html5-qrcode.min.js"></script>
  <script defer src="./assets/iosfix.js"></script>
</head>
<body>
  <header class="topbar">
    <div class="brand">BOL <span>Scanner Pro</span> • iOS Fix</div>
    <nav class="row">
      <span class="pill https-note" id="httpsNote" style="display:none">ℹ️ iPhone potrebuje HTTPS/localhost</span>
    </nav>
  </header>

  <main class="container">
    <section class="card">
      <h2>Živý skener (iPhone optimalizácia)</h2>
      <p class="muted">Postup: 1) „Povoliť kameru“, 2) „Spustiť (iOS)“. Ak padne, skúsi sa automaticky iný režim.</p>
      <div id="reader" class="reader"></div>
      <div class="row mt">
        <button id="btnPreflight" class="btn ghost">Povoliť kameru</button>
        <button id="btnStartIOS" class="btn">▶ Spustiť (iOS)</button>
        <button id="btnStop" class="btn ghost" disabled>✖ Zastaviť</button>
        <button id="btnSwitch" class="btn ghost" disabled>🔁 Prepnúť</button>
        <label class="btn ghost file-label">📸 Foto sken <input id="fileInput" type="file" accept="image/*" capture="environment" hidden></label>
      </div>
      <div class="status">
        <div>
          <div class="pill">Zachytený kód</div>
          <div id="outCode" class="badge" style="margin-top:6px">—</div>
          <div id="outMeta" class="muted">Formát: — • Režim: —</div>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>Log</h2>
      <pre id="log" class="log">—</pre>
    </section>
  </main>

  <audio id="beep"><source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABYAAAACABYAAAABAQAA" type="audio/wav"></audio>
</body>
</html>
